<mat-nav-list *ngIf="passwords">
  <h3 mat-subheader *ngFor="let password of passwords">{{ password.data.name }}</h3>
  <mat-list-item *ngFor="let password of passwords" (click)="showPassword(password)">
    <h4 mat-line>{{ password.data.username }}</h4>
    <mat-chip-list mat-line *ngIf="password.tags.length > 0" #tag_container [attr.data-expanded]="false">
      <a mat-chip *ngFor="let tag of (isExpanded(tag_container) ? password.tags : password.tags | slice:0:((isHandset$ | async) ? tag_amount_mobile : tag_amount))" 
        [routerLink]="'/tags/' + tag" [matTooltip]="tag | word">
        <i [class]="tag | tagIcon"></i>
      </a>
      <a mat-chip class="chip_more_tags" *ngIf="isExpanded(tag_container) ? false : password.tags.length > ((isHandset$ | async) ? tag_amount_mobile : tag_amount)"
        [matTooltip]="password.tags.length - ((isHandset$ | async) ? tag_amount_mobile : tag_amount) + ' more...'"
        (click)="expandTags(tag_container); $event.preventDefault(); $event.stopPropagation();">
        <i class="fas fa-ellipsis-h"></i>
      </a>
    </mat-chip-list>
    <button mat-icon-button (click)="copy(password.data.username, 'Username copied!'); $event.preventDefault(); $event.stopPropagation();" matTooltip="Copy username" *ngIf="password.data.username">
      <i class="fas fa-user"></i>
    </button>
    <button mat-icon-button (click)="copy(password.data.password, 'Password copied!'); $event.preventDefault(); $event.stopPropagation();" matTooltip="Copy password" *ngIf="password.data.password">
      <i class="fas fa-key"></i>
    </button>
  </mat-list-item>
</mat-nav-list>

<mat-spinner *ngIf="!passwords" color="accent" style="margin: 1em auto" diameter="30"></mat-spinner>