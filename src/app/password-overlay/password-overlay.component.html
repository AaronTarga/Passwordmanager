<mat-dialog-content class="mat-typography">
  <form [formGroup]="form">
    <mat-form-field>
      <input matInput placeholder="Name" type="text" formControlName="name" style="font-size: 1.5em" [readonly]="!edit_mode">
    </mat-form-field>
  
    <br>
  
    <mat-form-field>
      <input matInput placeholder="Username" type="text" formControlName="username" [readonly]="!edit_mode">
    </mat-form-field>
    <mat-form-field>
      <input matInput placeholder="Password" type="password" formControlName="password" [readonly]="!edit_mode" #password_input>
      <mat-icon matSuffix style="cursor: pointer"
        (click)="password_input.type != 'password' ? password_input.type = 'password' : password_input.type = 'text'">
        {{ password_input.type != 'password' ? 'visibility' : 'visibility_off' }}
      </mat-icon>
    </mat-form-field>

    <br>
  
    <mat-form-field>
      <input matInput placeholder="Domain" type="text" formControlName="domain" [readonly]="!edit_mode">
    </mat-form-field>
  
    <div formArrayName="additional_data" *ngIf="edit_mode">
      <mat-card *ngFor="let data of additional.controls; let i=index" [formGroupName]="i">
        <mat-card-content>
          <mat-form-field>
            <input matInput placeholder="Name" type="text" formControlName="name" autofocus>
          </mat-form-field>
          <mat-form-field>
            <input matInput placeholder="Value" type="text" formControlName="value">
          </mat-form-field>
        </mat-card-content>
  
        <mat-card-actions>
          <button mat-button (click)="removeAdditional(i)" color="warn">
            <mat-icon>remove_circle</mat-icon> Remove
          </button>
        </mat-card-actions>
      </mat-card>
  
      <button mat-raised-button color="accent" (click)="addAdditional()">
        <mat-icon>add</mat-icon>
        <span>Add field</span>
      </button>
    </div>
    
    <div formArrayName="additional_data" *ngIf="!edit_mode">
      <div *ngFor="let data of additional.controls; let i=index" [formGroupName]="i">
        <mat-form-field style="display: none">
          <input matInput placeholder="Name" type="text" formControlName="name" #name>
        </mat-form-field>
        <mat-form-field>
          <input matInput [placeholder]="name.value" type="text" formControlName="value" readonly>
        </mat-form-field>
      </div>
    </div>

    <!-- // TODO: make tags changable -->
  </form>
</mat-dialog-content>
<mat-dialog-actions align="end">
  <button mat-icon-button matTooltip="Undo changes" (click)="toggleEdit(false)" *ngIf="edit_mode">
    <mat-icon>delete_sweep</mat-icon>
  </button>

  <button mat-button (click)="toggleEdit()">
    <mat-icon *ngIf="!edit_mode">edit</mat-icon>
    <mat-icon *ngIf="edit_mode">save</mat-icon>
    <span>{{ edit_mode ? 'Save' : 'Edit' }}</span>
  </button>

  <button mat-button (click)="dialogRef.close()" cdkFocusInitial>
    <mat-icon>close</mat-icon>
    <span>Close</span>
  </button>
</mat-dialog-actions>